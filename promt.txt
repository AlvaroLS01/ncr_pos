Estoy experimentando este problema en el estandar
Tengo este log que como ves se hace la compra perfecta usando el descuento de empleado
13:56:41.304 [34mINFO [0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:62)[0;39m - Client connected from /192.168.88.128
13:56:41.305 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:192)[0;39m - loadConfiguration() - Loading configuration file NCRPosConfiguration.xml from C:\Users\Tier1\Desktop\CLIENTES\Ametller\pos\comerzzia-ametller-pos-resources\target\classes\NCRPosConfiguration.xml
13:56:41.320 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.util.xml.MarshallUtil (MarshallUtil.java:245)[0;39m - getMarshallContext() - Iniciado nuevo contexto de JAXB en 12ms
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ncrPosConfiguration>
    <authenticationBypass>false</authenticationBypass>
    <sendLinesDiscounts>true</sendLinesDiscounts>
    <simulateAllPayAsCash>false</simulateAllPayAsCash>
    <paymentsCodesMapping>
        <GiftCard xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">1000</GiftCard>
        <Credit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">0010</Credit>
        <Cash xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">0000</Cash>
    </paymentsCodesMapping>
    <pickupConcept>01</pickupConcept>
    <loanConcept>03</loanConcept>
    <headCashierRolesList>
        <role>0</role>
    </headCashierRolesList>
    <lcidToIsoMapping>
        <0403 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">ca-es</0403>
        <040C xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">fr-fr</040C>
        <0C0A xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">es-es</0C0A>
        <0809 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">en-gb</0809>
        <0409 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:string">en-us</0409>
    </lcidToIsoMapping>
</ncrPosConfiguration>
13:56:50.930 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="Initialize"><fields><field name="HeartbeatTimeout" ftype="int">3000</field><field name="Version" ftype="string">'4.3.0.0042'</field></fields></message>
13:56:50.937 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="InitializationComplete"><fields><field ftype="string" name="LaneNumber">1</field><field ftype="string" name="Version">1</field><field ftype="int" name="HeartbeatTimeout">3000</field></fields></message>
13:56:51.151 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="RequestPosState"><fields/></message>
13:56:51.155 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="PosState"><fields><field ftype="string" name="State">inactive</field></fields></message>
13:57:54.651 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="ValidateUserId"><fields><field name="UserId" ftype="string">1</field><field name="Password" ftype="string">1</field><field name="role" ftype="string">Operator</field></fields></message>
13:57:54.653 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.sesion.Sesion (Sesion.java:66)[0;39m - initUsuarioSesion() - Inicializando sesi√≥n de usuario...
13:57:54.655 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.usuarios.UsuariosService (UsuariosService.java:69)[0;39m - login() - Realizando login con usuario:  1
13:57:54.655 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.usuarios.UsuariosService (UsuariosService.java:112)[0;39m - consultarUsuario() - Consultando usuario: 1
13:57:55.013 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.perfiles.ServicioPerfiles (ServicioPerfiles.java:52)[0;39m - consultar() - Consultando perfiles
13:57:55.629 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.perfiles.ServicioPerfiles (ServicioPerfiles.java:52)[0;39m - consultar() - Consultando perfiles
13:57:55.793 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="ValidateUserId"><fields><field ftype="string" name="UserId">1</field><field ftype="int" name="AuthenticationLevel">2</field></fields></message>
13:57:56.193 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="SignOn"><fields><field name="LaneNumber" ftype="string">1</field><field name="UserId" ftype="string">1</field><field name="Password" ftype="string">10</field></fields></message>
13:57:56.195 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="SignOn"><fields/></message>
13:57:57.452 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="Language"><fields><field name="CustomerLanguage" ftype="string">0403</field></fields></message>
13:57:57.454 [34mINFO [0;39m (main) [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:126)[0;39m - Locale changed to ca-es
13:58:19.192 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">2020189551605</field><field name="ScanCodeType" ftype="string">code128</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">B32020189551605</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
13:58:19.199 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:180)[0;39m - init() - Actualizamos promociones activas...
13:58:19.200 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.promociones.PromocionesService (PromocionesService.java:55)[0;39m - consultarPromocionesActivas() - Consultando promociones activas...
13:58:19.224 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:225)[0;39m - init() - Promociones activas actualizadas a √∫ltima versi√≥n.
13:58:19.225 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="StartTransaction"><fields><field ftype="string" name="Type">normal</field><field ftype="string" name="Id">23c5bc91-9f46-443f-ba47-bd0fd74a1291</field></fields></message>
13:58:19.227 [34mINFO [0;39m (main) [34mcom.comerzzia.api.rest.client.fidelizados.FidelizadosRest (FidelizadosRest.java:184)[0;39m - getFidelizado() - Realizando petici√≥n de procesamiento de fidelizado
13:58:19.227 [34mINFO [0;39m (main) [34mcom.comerzzia.api.rest.client.fidelizados.FidelizadosRest (FidelizadosRest.java:191)[0;39m - getFidelizado() - URL de servicio rest en la que se realiza la petici√≥n: http://ametller.172.16.100.75.nip.io/comerzzia/ws/fidelizados/fidelizado?numeroTarjeta=2020189551605&apiKey=tVm8JGR5erUl1iKxSiTwSwDPRmpggj&uidActividad=ad95dab4-51b4-48a5-bfc7-75db4e9f5ae1
13:58:23.066 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.dispositivo.fidelizacion.Fidelizacion (Fidelizacion.java:311)[0;39m - getCustomerCoupons() - Querying coupons for customer 3000007
13:58:23.162 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="LoyaltyCard"><fields><field ftype="string" name="AccountNumber">2020189551605</field><field ftype="string" name="CardType">loyalty</field><field ftype="int" name="Status">1</field></fields></message>
13:58:23.165 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">0</field><field ftype="int" name="TaxAmount.A">0</field><field ftype="int" name="BalanceDue">0</field><field ftype="int" name="ItemCount">0</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
13:58:30.592 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">8437013061209</field><field name="ScanCodeType" ftype="string">code128</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">B38437013061209</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
13:58:30.593 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700)[0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 8437013061209
13:58:30.593 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722)[0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
13:58:30.595 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80)[0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
13:58:30.595 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240)[0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 8437013061209
13:58:30.608 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82)[0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 1071
13:58:30.686 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132)[0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 1071 para cliente: T13 - 013 Capellades
13:58:30.686 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135)[0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T13
13:58:30.763 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144)[0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 13
13:58:30.931 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">8437013061209</field><field ftype="string" name="Description">Hummus AO 250g</field><field ftype="int" name="ItemNumber">1</field><field ftype="int" name="ExtendedPrice">199</field><field ftype="int" name="Price">199</field></fields></message>
13:58:30.934 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">183</field><field ftype="int" name="TaxAmount.A">17</field><field ftype="int" name="BalanceDue">183</field><field ftype="int" name="ItemCount">1</field><field ftype="int" name="DiscountAmount">16</field><field ftype="int" name="Points">0</field></fields></message>
13:58:30.939 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">8437013061209</field><field ftype="string" name="Description">Hummus AO 250g
Descuento promocional aplicado: 36089 -0.16</field><field ftype="int" name="ItemNumber">1</field><field ftype="int" name="Price">183</field></fields></message>
13:58:30.943 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">183</field><field ftype="int" name="TaxAmount.A">17</field><field ftype="int" name="BalanceDue">183</field><field ftype="int" name="ItemCount">1</field><field ftype="int" name="DiscountAmount">16</field><field ftype="int" name="Points">0</field></fields></message>
13:58:33.105 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="EnterTenderMode"><fields/></message>
13:58:33.110 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">183</field><field ftype="int" name="TaxAmount.A">17</field><field ftype="int" name="BalanceDue">183</field><field ftype="int" name="ItemCount">1</field><field ftype="int" name="DiscountAmount">16</field><field ftype="int" name="Points">0</field></fields></message>
13:58:35.007 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129)[0;39m - Message Received: <message name="Tender"><fields><field name="Amount" ftype="int">183</field><field name="TenderType" ftype="string">Credit</field><field name="CashBack" ftype="string">0</field></fields></message>
13:58:35.011 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="TenderException"><fields><field ftype="string" name="TenderType">Credit</field><field ftype="int" name="ExceptionType">0</field><field ftype="int" name="ExceptionId">1</field></fields></message>
13:58:35.013 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:297)[0;39m - pay() - Se va a pagar 1.83 del medio de pago 0010
13:58:35.013 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.actions.sale.PayManager (PayManager.java:243)[0;39m - processPaymentOk() - Pay accepted
13:58:35.015 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="TenderAccepted"><fields><field ftype="int" name="Amount">183</field><field ftype="string" name="TenderType">Credit</field><field ftype="string" name="Description">TARGETA CR√àDIT</field></fields></message>
13:58:35.017 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">183</field><field ftype="int" name="TaxAmount.A">17</field><field ftype="int" name="BalanceDue">0</field><field ftype="int" name="ItemCount">1</field><field ftype="int" name="DiscountAmount">16</field><field ftype="int" name="Points">0</field></fields></message>
13:58:35.019 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:343)[0;39m - saveTicketBackup() - Guardando copia de seguridad del ticket.
13:58:35.019 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:128)[0;39m - guardarBackupTicketActivo()
13:58:35.019 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:134)[0;39m - guardarBackupTicketActivo() - Eliminando copia de seguridad de ticket...
13:58:35.143 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:173)[0;39m - guardarBackupTicketActivo() - Guardando copia de seguridad de ticket...
13:58:35.221 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:182)[0;39m - guardarBackupTicketActivo() - Confirmando transacci√≥n...
13:58:35.221 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:325)[0;39m - pay() - Importe pendiente: 0.00
13:58:35.221 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.actions.sale.PayManager (PayManager.java:306)[0;39m - finishSale() - Printing receipt and end trasaction
13:58:35.221 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:136)[0;39m - setContadorIdTicket() - Obteniendo contador para identificador...
13:58:35.221 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.config.configContadores.ServicioConfigContadores (ServicioConfigContadores.java:98)[0;39m - consultar() - Consultando datos del contador: REP_NUMFAC
13:58:35.234 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.ServicioConfigContadoresRangos (ServicioConfigContadoresRangos.java:43)[0;39m - consultar() - Consultando rangos 
13:58:35.298 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.contadores.ServicioContadores (ServicioContadores.java:370)[0;39m - consultarContador() - Obteniendo el valor para el contador REP_NUMFAC
13:58:35.298 [39mDEBUG[0;39m (main) [34mc.comerzzia.pos.services.core.config.configContadores.parametros.ServicioConfigContadoresParametros (ServicioConfigContadoresParametros.java:103)[0;39m - consultar() - Consultando par√°metro del contador REP_NUMFAC
13:58:35.395 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:128)[0;39m - guardarBackupTicketActivo()
13:58:35.395 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:134)[0;39m - guardarBackupTicketActivo() - Eliminando copia de seguridad de ticket...
13:58:35.515 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:173)[0;39m - guardarBackupTicketActivo() - Guardando copia de seguridad de ticket...
13:58:35.542 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:182)[0;39m - guardarBackupTicketActivo() - Confirmando transacci√≥n...
13:58:35.542 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.FileCounterRangeManagerImpl (FileCounterRangeManagerImpl.java:103)[0;39m - readFromPropertiesFile() - Reading file fiscal/REP_NUMFAC__0000__FS__2025%2F131.properties
13:58:35.542 [31mWARN [0;39m (main) [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.FileCounterRangeManagerImpl (FileCounterRangeManagerImpl.java:122)[0;39m - readFromPropertiesFile() - No se ha encontrado el fichero REP_NUMFAC__0000__FS__2025/131.properties: null
13:58:35.542 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:199)[0;39m - registrarTicket() - Procesando ticket ... 
13:58:35.554 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:367)[0;39m - registrarMovimientosCaja() - Registrando movimientos de caja
13:58:35.554 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:135)[0;39m - consultarProximaLineaDetalleCaja() - Obteniendo pr√≥ximo n√∫mero de l√≠nea de detalle de caja para uidDiarioCaja: d7d99f2d-10e0-4289-ae6d-388211831977
13:58:35.556 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:139)[0;39m - crearMovimiento() - obteniendo el numero de linea del movimiento
13:58:35.568 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:305)[0;39m - crearMovimiento() - Insertando movimiento de caja
13:58:35.584 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:772)[0;39m - consultarUltimoTicket() - Consultando √∫ltimo ticket en base de datos...
13:58:35.704 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:273)[0;39m - registrarTicket() - Ejecutando listeners posteriores al guardado del ticket
13:58:35.706 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:277)[0;39m - registrarTicket() - Construyendo objeto persistente...
13:58:35.706 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:764)[0;39m - setFiscalData() - No hay configurado un servicio fiscal para el pa√≠s 'ES'
13:58:35.706 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:298)[0;39m - registrarTicket() - Generando XML del ticket...
13:58:35.709 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:302)[0;39m - registrarTicket() - TICKET INSERT: 2311d609-7fff-4b05-a5a1-67673c0bab12
13:58:35.709 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:552)[0;39m - insertarTicket() - Salvando ticket en base de datos...
13:58:35.785 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:307)[0;39m - registrarTicket() - Ejecutando listeners posteriores al guardado del ticket
13:58:35.785 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:310)[0;39m - registrarTicket() - Eliminando copia de seguridad...
13:58:35.785 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:228)[0;39m - eliminarBackup() - Eliminando backup del ticket en base de datos...
13:58:35.804 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:236)[0;39m - eliminarBackup() - Backup del ticket eliminado correctamente.
13:58:35.804 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:312)[0;39m - registrarTicket() - Confirmando transacci√≥n...
13:58:35.828 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:314)[0;39m - registrarTicket() - Ticket salvado correctamente.
13:58:35.828 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:340)[0;39m - registrarTicket() - Ejecutando listeners posteriores al commit del ticket
13:58:35.828 [31mWARN [0;39m (main) [34mcom.comerzzia.ametller.pos.ncr.actions.sale.AmetllerPayManager (AmetllerPayManager.java:402)[0;39m - sendReceiptMessage() - Unexpected printer implementation: com.comerzzia.pos.core.dispositivos.dispositivo.impresora.ImpresoraNoConfig
13:58:35.831 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="Receipt"><fields><field ftype="string" name="Id">23c5bc91-9f46-443f-ba47-bd0fd74a1291</field><field ftype="int" name="Complete">1</field><field ftype="bin.base64" name="PrinterData.1">QW1ldGxsZXIgT3JpZ2VuDQo=</field><field ftype="bin.base64" name="PrinterData.2">MDIvMTAvMjAyNSAxMzo1OA0K</field><field ftype="bin.base64" name="PrinterData.3">VGlja2V0OiAyMzExZDYwOS03ZmZmLTRiMDUtYTVhMS02NzY3M2MwYmFiMTINCg==</field><field ftype="bin.base64" name="PrinterData.4">LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo=</field><field ftype="bin.base64" name="PrinterData.5">SHVtbXVzIEFPIDI1MGcNCg==</field><field ftype="bin.base64" name="PrinterData.6">ICAxIHggMSw4MyDigqwgPSAxLDgzIOKCrA0K</field><field ftype="bin.base64" name="PrinterData.7">LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo=</field><field ftype="bin.base64" name="PrinterData.8">QXJ0w61jdWxvczogMQ0K</field><field ftype="bin.base64" name="PrinterData.9">RGVzY3VlbnRvczogLTAsMTYg4oKsDQo=</field><field ftype="bin.base64" name="PrinterData.10">SW1wdWVzdG9zOiAwLDE3IOKCrA0K</field><field ftype="bin.base64" name="PrinterData.11">VG90YWw6IDEsODMg4oKsDQo=</field><field ftype="bin.base64" name="PrinterData.12">UGFnYWRvOiAxLDgzIOKCrA0K</field><field ftype="bin.base64" name="PrinterData.13">UGFnb3MNCg==</field><field ftype="bin.base64" name="PrinterData.14">ICBUQVJHRVRBIENSw4hESVQ6IDEsODMg4oKsDQo=</field><field ftype="bin.base64" name="PrinterData.15">R3JhY2lhcyBwb3Igc3UgY29tcHJhDQo=</field></fields></message>
13:58:35.838 [39mDEBUG[0;39m (main) [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145)[0;39m - Sending message: <message msgid="b2" name="EndTransaction"><fields><field ftype="string" name="Id">23c5bc91-9f46-443f-ba47-bd0fd74a1291</field></fields></message>


Y luego tengo esta casuistica que como ves se queda bloqueado diciendo que queda por pagar cosas
12:08:51.942  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Language"><fields><field name="CustomerLanguage" ftype="string">0403</field></fields></message>
12:08:51.943  [34mINFO  [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:126) [0;39m - Locale changed to ca-es
12:09:03.554  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">73</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">73</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:09:03.556  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:111) [0;39m - ticketInitilize() - Creating ticket with default values...
12:09:03.557  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:180) [0;39m - init() - Actualizamos promociones activas...
12:09:03.557  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.promociones.PromocionesService (PromocionesService.java:55) [0;39m - consultarPromocionesActivas() - Consultando promociones activas...
12:09:03.703  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.promociones.PromocionesBuilder (PromocionesBuilder.java:34) [0;39m - create() - Instanciando promoci√≥n: 32938 - Preu Club Vins XIC DEL MEL 75cl
12:09:03.704  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.promociones.PromocionesService (PromocionesService.java:105) [0;39m - consultarDetallesPromocion() - Consultando detalles promoci√≥n: 32938
12:09:03.710  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:210) [0;39m - actualizarPromocionesActivas() - java.lang.NullPointerException - null
java.lang.NullPointerException: null
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.io.ByteArrayInputStream.<init>(ByteArrayInputStream.java:106)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.core.util.xml.XMLDocument.<init>(XMLDocument.java:101)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.promociones.tipos.especificos.detalles.DetallePromocionPrecio.<init>(DetallePromocionPrecio.java:39)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.promociones.tipos.especificos.PromocionPrecioDetalles.createDetallePromocion(PromocionPrecioDetalles.java:41)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.promociones.tipos.PromocionLineaDetalles.setDetalles(PromocionLineaDetalles.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.promociones.tipos.PromocionLineaDetalles.init(PromocionLineaDetalles.java:52)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.promociones.PromocionesBuilder.create(PromocionesBuilder.java:43)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.core.sesion.SesionPromociones.actualizarPromocionesActivas(SesionPromociones.java:203)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.ticket.ScoTicketManager.ticketInitilize(ScoTicketManager.java:130)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.newTicket(ItemsManager.java:256)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:130)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:09:04.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:225) [0;39m - init() - Promociones activas actualizadas a √∫ltima versi√≥n.
12:09:04.003  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="StartTransaction"><fields><field ftype="string" name="Type">normal</field><field ftype="string" name="Id">12bc0b5d-5e73-4717-b708-e4eb3234695b</field></fields></message>
12:09:04.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 73
12:09:04.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:09:04.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:09:04.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:09:04.011  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 73
12:09:04.026  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 73
12:09:04.026  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 73
12:09:04.029  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 73 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:09:04.029  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:09:04.033  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:09:04.038  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">73</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:09:05.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">73</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">205</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">73</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:09:05.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 73
12:09:05.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:09:05.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:09:05.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:09:05.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 73
12:09:05.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 73
12:09:05.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 73
12:09:05.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 73 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:09:05.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:09:05.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:09:05.021  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:09:05.029  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">73</field><field ftype="string" name="Description">Llimona</field><field ftype="int" name="ItemNumber">1</field><field ftype="int" name="ExtendedPrice">65</field><field ftype="int" name="Price">315</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">205</field></fields></message>
12:09:05.042  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">65</field><field ftype="int" name="TaxAmount.A">2</field><field ftype="int" name="BalanceDue">65</field><field ftype="int" name="ItemCount">1</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:09:42.891  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">129</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">129</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:09:42.892  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 129
12:09:42.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:09:42.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:09:42.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:09:42.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 129
12:09:42.898  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 129
12:09:42.899  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 129
12:09:42.904  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 129 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:09:42.905  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:09:42.907  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:09:42.912  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">129</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:09:44.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">129</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">665</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">129</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:09:44.007  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 129
12:09:44.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:09:44.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:09:44.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:09:44.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 129
12:09:44.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 129
12:09:44.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 129
12:09:44.014  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 129 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:09:44.014  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:09:44.018  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:09:44.027  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:09:44.033  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">129</field><field ftype="string" name="Description">Carbass√≥ extra</field><field ftype="int" name="ItemNumber">2</field><field ftype="int" name="ExtendedPrice">132</field><field ftype="int" name="Price">199</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">665</field></fields></message>
12:09:44.045  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">197</field><field ftype="int" name="TaxAmount.A">8</field><field ftype="int" name="BalanceDue">197</field><field ftype="int" name="ItemCount">2</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:10:02.393  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">232</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">232</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:02.395  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 232
12:10:02.395  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:02.395  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 232
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:10:02.395  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:02.395  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:02.396  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 232
12:10:02.398  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 232
12:10:02.399  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 232
12:10:02.402  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 232 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:02.402  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:02.405  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:02.410  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">232</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:10:03.007  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">232</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">570</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">232</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:03.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 232
12:10:03.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:03.009  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 232
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:10:03.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:03.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:03.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 232
12:10:03.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 232
12:10:03.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 232
12:10:03.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 232 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:03.016  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:03.018  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:03.024  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:10:03.034  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">232</field><field ftype="string" name="Description">Fonoll</field><field ftype="int" name="ItemNumber">3</field><field ftype="int" name="ExtendedPrice">170</field><field ftype="int" name="Price">299</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">570</field></fields></message>
12:10:03.046  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">367</field><field ftype="int" name="TaxAmount.A">14</field><field ftype="int" name="BalanceDue">367</field><field ftype="int" name="ItemCount">3</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:10:13.259  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">132</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">132</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:13.260  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 132
12:10:13.260  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:13.260  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:13.261  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:13.261  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 132
12:10:13.263  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 132
12:10:13.263  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 132
12:10:13.265  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 132 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:13.265  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:13.272  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:13.296  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">132</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:10:14.000  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">132</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">390</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">132</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:14.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 132
12:10:14.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:14.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:14.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:14.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 132
12:10:14.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 132
12:10:14.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 132
12:10:14.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 132 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:14.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:14.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:14.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:10:14.026  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">132</field><field ftype="string" name="Description">Cogombre curt</field><field ftype="int" name="ItemNumber">4</field><field ftype="int" name="ExtendedPrice">78</field><field ftype="int" name="Price">199</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">390</field></fields></message>
12:10:14.038  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">445</field><field ftype="int" name="TaxAmount.A">17</field><field ftype="int" name="BalanceDue">445</field><field ftype="int" name="ItemCount">4</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:10:31.889  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">109</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">109</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:31.890  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 109
12:10:31.890  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:31.890  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:31.891  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:31.891  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 109
12:10:31.897  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 109
12:10:31.897  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 109
12:10:31.906  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 109 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:31.906  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:31.908  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:31.910  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:10:31.920  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">109</field><field ftype="string" name="Description">Enciam llarg</field><field ftype="int" name="ItemNumber">5</field><field ftype="int" name="ExtendedPrice">179</field><field ftype="int" name="Price">179</field></fields></message>
12:10:31.928  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">624</field><field ftype="int" name="TaxAmount.A">24</field><field ftype="int" name="BalanceDue">624</field><field ftype="int" name="ItemCount">5</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:10:41.892  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">228</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">228</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:41.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 228
12:10:41.893  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:41.894  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 228
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:10:41.894  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:41.894  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:41.894  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 228
12:10:41.896  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 228
12:10:41.896  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 228
12:10:41.900  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 228 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:41.900  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:41.904  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:41.909  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">228</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:10:42.151  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">228</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">600</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">228</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:42.152  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 228
12:10:42.153  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:42.153  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 228
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:10:42.153  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:42.153  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:42.153  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 228
12:10:42.159  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 228
12:10:42.159  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 228
12:10:42.160  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 228 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:42.160  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:42.162  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:42.166  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:10:42.174  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">228</field><field ftype="string" name="Description">Pastanaga</field><field ftype="int" name="ItemNumber">6</field><field ftype="int" name="ExtendedPrice">107</field><field ftype="int" name="Price">179</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">600</field></fields></message>
12:10:42.184  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">731</field><field ftype="int" name="TaxAmount.A">28</field><field ftype="int" name="BalanceDue">731</field><field ftype="int" name="ItemCount">6</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:10:58.887  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">101</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">101</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:10:58.888  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 101
12:10:58.888  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:10:58.888  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:10:58.889  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:10:58.889  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 101
12:10:58.891  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 101
12:10:58.892  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 101
12:10:58.896  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 101 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:10:58.896  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:10:58.898  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:10:58.904  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:10:58.912  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">101</field><field ftype="string" name="Description">Br√≤coli extra u.</field><field ftype="int" name="ItemNumber">7</field><field ftype="int" name="ExtendedPrice">249</field><field ftype="int" name="Price">249</field></fields></message>
12:10:58.920  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">980</field><field ftype="int" name="TaxAmount.A">38</field><field ftype="int" name="BalanceDue">980</field><field ftype="int" name="ItemCount">7</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:11:15.650  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">204</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">204</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:15.651  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 204
12:11:15.652  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:15.652  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:15.652  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:15.652  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 204
12:11:15.663  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 204
12:11:15.663  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 204
12:11:15.675  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 204 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:15.675  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:15.677  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:15.683  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">204</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:11:16.000  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">204</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">265</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">204</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:16.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 204
12:11:16.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:16.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:16.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:16.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 204
12:11:16.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 204
12:11:16.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 204
12:11:16.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 204 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:16.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:16.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:16.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:11:16.024  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">204</field><field ftype="string" name="Description">Ceba cuina</field><field ftype="int" name="ItemNumber">8</field><field ftype="int" name="ExtendedPrice">53</field><field ftype="int" name="Price">199</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">265</field></fields></message>
12:11:16.035  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">1033</field><field ftype="int" name="TaxAmount.A">40</field><field ftype="int" name="BalanceDue">1033</field><field ftype="int" name="ItemCount">8</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:11:42.768  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">622</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">622</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:42.770  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 622
12:11:42.770  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:42.770  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:42.770  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:42.771  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 622
12:11:42.772  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 622
12:11:42.772  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 622
12:11:42.776  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 622 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:42.776  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:42.780  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:42.785  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">622</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:11:43.000  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">622</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">365</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">622</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:43.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 622
12:11:43.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:43.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:43.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:43.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 622
12:11:43.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 622
12:11:43.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 622
12:11:43.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 622 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:43.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:43.011  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:43.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:11:43.023  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">622</field><field ftype="string" name="Description">Nou closca granel</field><field ftype="int" name="ItemNumber">9</field><field ftype="int" name="ExtendedPrice">292</field><field ftype="int" name="Price">799</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">365</field></fields></message>
12:11:43.036  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">1325</field><field ftype="int" name="TaxAmount.A">51</field><field ftype="int" name="BalanceDue">1325</field><field ftype="int" name="ItemCount">9</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:11:48.013  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">334</field><field name="ScanCodeType" ftype="string">code128</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">B3334</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
12:11:48.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 334
12:11:48.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:48.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:48.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:48.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 334
12:11:48.019  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 334
12:11:48.019  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 334
12:11:48.023  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 334 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:48.023  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:48.025  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:48.034  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:11:48.042  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">334</field><field ftype="string" name="Description">Alvocat I u.</field><field ftype="int" name="ItemNumber">10</field><field ftype="int" name="ExtendedPrice">199</field><field ftype="int" name="Price">199</field></fields></message>
12:11:48.050  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">1524</field><field ftype="int" name="TaxAmount.A">59</field><field ftype="int" name="BalanceDue">1524</field><field ftype="int" name="ItemCount">10</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:11:58.747  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">215</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">215</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:58.749  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 215
12:11:58.749  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:58.749  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 7 tratando c√≥digo de barras especial 215
java.lang.StringIndexOutOfBoundsException: String index out of range: 7
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:11:58.749  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:58.750  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:58.750  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 215
12:11:58.755  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 215
12:11:58.755  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 215
12:11:58.760  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 215 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:58.760  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:58.762  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:58.767  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">215</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:11:59.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">215</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">1300</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">215</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:11:59.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 215
12:11:59.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:11:59.006  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 7 tratando c√≥digo de barras especial 215
java.lang.StringIndexOutOfBoundsException: String index out of range: 7
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:11:59.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:11:59.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:11:59.007  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 215
12:11:59.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 215
12:11:59.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 215
12:11:59.016  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 215 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:11:59.017  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:11:59.019  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:11:59.023  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:11:59.033  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">215</field><field ftype="string" name="Description">Patata monalisa</field><field ftype="int" name="ItemNumber">11</field><field ftype="int" name="ExtendedPrice">259</field><field ftype="int" name="Price">199</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">1300</field></fields></message>
12:11:59.046  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">1783</field><field ftype="int" name="TaxAmount.A">69</field><field ftype="int" name="BalanceDue">1783</field><field ftype="int" name="ItemCount">11</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:12:13.176  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">20170</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">20170</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:12:13.177  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 20170
12:12:13.178  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:12:13.178  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:12:13.178  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:12:13.179  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 20170
12:12:13.185  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 20170
12:12:13.185  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 20170
12:12:13.190  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 20170 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:12:13.190  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:12:13.193  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:12:13.199  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">20170</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:12:14.004  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">20170</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">480</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">20170</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:12:14.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 20170
12:12:14.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:12:14.005  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:12:14.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:12:14.006  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 20170
12:12:14.009  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 20170
12:12:14.010  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 20170
12:12:14.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 20170 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:12:14.015  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:12:14.024  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:12:14.030  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:12:14.039  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">20170</field><field ftype="string" name="Description">Ra√Øm Blanc sense llavors</field><field ftype="int" name="ItemNumber">12</field><field ftype="int" name="ExtendedPrice">312</field><field ftype="int" name="Price">649</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">480</field></fields></message>
12:12:14.051  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">2095</field><field ftype="int" name="TaxAmount.A">81</field><field ftype="int" name="BalanceDue">2095</field><field ftype="int" name="ItemCount">12</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:12:21.405  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">220585790000100749007492</field><field name="ScanCodeType" ftype="string">code128</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">B3220585790000100749007492</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
12:12:21.406  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 220585790000100749007492
12:12:21.406  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:12:21.407  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:12:21.407  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 58579
12:12:21.409  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 58579
12:12:21.410  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 58579
12:12:21.415  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 58579 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:12:21.415  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:12:21.417  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:12:21.421  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:12:21.421  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:12:21.421  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 58579
12:12:21.423  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 58579 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:12:21.423  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:12:21.424  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:12:21.426  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:12:21.436  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">220585790000100749007492</field><field ftype="string" name="Description">Amanida de Salm√≥ i Guacamole AO 390g AMETLLER</field><field ftype="int" name="ItemNumber">13</field><field ftype="int" name="ExtendedPrice">749</field><field ftype="int" name="Price">749</field></fields></message>
12:12:21.445  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">2844</field><field ftype="int" name="TaxAmount.A">149</field><field ftype="int" name="BalanceDue">2844</field><field ftype="int" name="ItemCount">13</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:12:53.816  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="ValidateUserId"><fields><field name="UserId" ftype="string">218204</field><field name="Password" ftype="string">4662</field><field name="role" ftype="string">Operator</field></fields></message>
12:12:53.817  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.Sesion (Sesion.java:66) [0;39m - initUsuarioSesion() - Inicializando sesi√≥n de usuario...
12:12:53.817  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.usuarios.UsuariosService (UsuariosService.java:69) [0;39m - login() - Realizando login con usuario:  218204
12:12:53.817  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.usuarios.UsuariosService (UsuariosService.java:112) [0;39m - consultarUsuario() - Consultando usuario: 218204
12:12:53.821  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.perfiles.ServicioPerfiles (ServicioPerfiles.java:52) [0;39m - consultar() - Consultando perfiles
12:12:53.822  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.perfiles.ServicioPerfiles (ServicioPerfiles.java:52) [0;39m - consultar() - Consultando perfiles
12:12:53.825  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ValidateUserId"><fields><field ftype="string" name="UserId">218204</field><field ftype="int" name="AuthenticationLevel">1</field></fields></message>
12:13:01.387  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">230</field><field name="Scanned" ftype="int">0</field><field name="LabelData" ftype="string">230</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:13:01.388  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 230
12:13:01.388  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:13:01.389  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 230
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:13:01.389  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:13:01.389  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:13:01.389  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 230
12:13:01.391  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 230
12:13:01.391  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 230
12:13:01.396  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 230 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:13:01.397  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:13:01.398  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:13:01.403  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemException"><fields><field ftype="string" name="UPC">230</field><field ftype="int" name="WeightRequired">1</field></fields></message>
12:13:01.999  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">230</field><field name="Scanned" ftype="int">0</field><field name="Weight" ftype="int">1210</field><field name="TareCode" ftype="int">0</field><field name="LabelData" ftype="string">230</field><field name="PicklistEntry" ftype="int">-1</field></fields></message>
12:13:02.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 230
12:13:02.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:13:02.001  [1;31mERROR [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.ItemsManager (ItemsManager.java:650) [0;39m - checkCodigoBarrasEspecial() - Error inesperado String index out of range: 8 tratando c√≥digo de barras especial 230
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat java.lang.String.substring(String.java:1963)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.services.codBarrasEsp.CodBarrasEspecialesServices.esCodigoBarrasEspecial(CodBarrasEspecialesServices.java:208)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.isEspecialBarcode(ItemsManager.java:648)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.evaluateItemType(ItemsManager.java:555)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.actions.sale.ItemsManager.processMessage(ItemsManager.java:139)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRController.start(NCRController.java:72)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.start(NCRPOSApplication.java:157)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.<init>(NCRPOSApplication.java:87)
‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇ‚ÄÇat com.comerzzia.pos.ncr.NCRPOSApplication.main(NCRPOSApplication.java:78)
12:13:02.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:13:02.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:13:02.002  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 230
12:13:02.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:249) [0;39m - consultarCodigoBarras() - No se encontr√≥ el art√≠culo por c√≥digo de barras : 230
12:13:02.008  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 230
12:13:02.014  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 230 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:13:02.014  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:13:02.016  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:13:02.019  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:13:02.029  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">230</field><field ftype="string" name="Description">Moniato</field><field ftype="int" name="ItemNumber">14</field><field ftype="int" name="ExtendedPrice">313</field><field ftype="int" name="Price">259</field><field ftype="int" name="RequiresSecurityBagging">2</field><field ftype="int" name="RequiresSubsCheck">2</field><field ftype="int" name="Quantity">1</field><field ftype="int" name="Weight">1210</field></fields></message>
12:13:02.041  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">3157</field><field ftype="int" name="TaxAmount.A">161</field><field ftype="int" name="BalanceDue">3157</field><field ftype="int" name="ItemCount">14</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:13:07.144  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">8437015558028</field><field name="ScanCodeType" ftype="string">ean13</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">F8437015558028</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
12:13:07.146  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:700) [0;39m - getPromocionAplicacionCupon() - Intentando aplicar cup√≥n con c√≥digo: 8437015558028
12:13:07.146  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.sesion.SesionPromociones (SesionPromociones.java:722) [0;39m - getPromocionAplicacionCupon() - El c√≥digo no pertenece a cup√≥n fijo de promoci√≥n activa ni tiene formato de cup√≥n generado por el POS.
12:13:07.146  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:163) [0;39m - createTicketLine() - New ticket line...
12:13:07.146  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.lineas.LineasTicketServices (LineasTicketServices.java:80) [0;39m - createLineaArticulo() - Creando nueva l√≠nea de art√≠culo...
12:13:07.146  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:240) [0;39m - consultarCodigoBarras() - Consultando c√≥digo de barras con codigo : 8437015558028
12:13:07.151  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.ArticulosService (ArticulosService.java:82) [0;39m - consultarArticulo() - Consultando articulo con c√≥digo : 84
12:13:07.154  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:132) [0;39m - consultarArticuloTarifa() - Consultando tarifa de articulo con c√≥digo : 84 para cliente: T226 - 226 BCN21 Rambla Poblenou
12:13:07.154  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:135) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo del cliente: T226
12:13:07.156  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.articulos.tarifas.ArticulosTarifaService (ArticulosTarifaService.java:144) [0;39m - consultarArticuloTarifa() - Buscando tarifa con c√≥digo igual al c√≥digo de tarifa del cliente: 226
12:13:07.159  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:178) [0;39m - addLineToTicket() - Insert new line into ticket...
12:13:07.169  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="ItemSold"><fields><field ftype="string" name="UPC">8437015558028</field><field ftype="string" name="Description">Caqui safata</field><field ftype="int" name="ItemNumber">15</field><field ftype="int" name="ExtendedPrice">399</field><field ftype="int" name="Price">399</field></fields></message>
12:13:07.176  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">3556</field><field ftype="int" name="TaxAmount.A">176</field><field ftype="int" name="BalanceDue">3556</field><field ftype="int" name="ItemCount">15</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:13:13.998  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="EnterTenderMode"><fields/></message>
12:13:14.001  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">3556</field><field ftype="int" name="TaxAmount.A">176</field><field ftype="int" name="BalanceDue">3556</field><field ftype="int" name="ItemCount">15</field><field ftype="int" name="DiscountAmount">0</field><field ftype="int" name="Points">0</field></fields></message>
12:14:21.249  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Item"><fields><field name="UPC" ftype="string">2800008773672</field><field name="ScanCodeType" ftype="string">ean13</field><field name="Scanned" ftype="int">1</field><field name="LabelData" ftype="string">F2800008773672</field><field name="PicklistEntry" ftype="int">0</field></fields></message>
12:14:21.251  [34mINFO  [0;39m (main)  [34mcom.comerzzia.api.rest.client.fidelizados.FidelizadosRest (FidelizadosRest.java:184) [0;39m - getFidelizado() - Realizando petici√≥n de procesamiento de fidelizado
12:14:21.252  [34mINFO  [0;39m (main)  [34mcom.comerzzia.api.rest.client.fidelizados.FidelizadosRest (FidelizadosRest.java:191) [0;39m - getFidelizado() - URL de servicio rest en la que se realiza la petici√≥n: http://comerzzia.casaametller.net/comerzzia/ws/fidelizados/fidelizado?numeroTarjeta=2800008773672&apiKey=9cOyy1SpcwNpUSvSMXJKfTGGdQbIcU&uidActividad=ad95dab4-51b4-48a5-bfc7-75db4e9f5ae1
12:14:21.357  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.fidelizacion.Fidelizacion (Fidelizacion.java:311) [0;39m - getCustomerCoupons() - Querying coupons for customer 158032
12:14:21.423  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="LoyaltyCard"><fields><field ftype="string" name="AccountNumber">2800008773672</field><field ftype="string" name="CardType">loyalty</field><field ftype="int" name="Status">1</field></fields></message>
12:14:21.429  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">3515</field><field ftype="int" name="TaxAmount.A">174</field><field ftype="int" name="BalanceDue">3515</field><field ftype="int" name="ItemCount">15</field><field ftype="int" name="DiscountAmount">41</field><field ftype="int" name="Points">0</field></fields></message>
12:14:25.646  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:129) [0;39m - Message Received: <message name="Tender"><fields><field name="Amount" ftype="int">3515</field><field name="TenderType" ftype="string">Credit</field><field name="CashBack" ftype="string">0</field></fields></message>
12:14:25.649  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="TenderException"><fields><field ftype="string" name="TenderType">Credit</field><field ftype="int" name="ExceptionType">0</field><field ftype="int" name="ExceptionId">1</field></fields></message>
12:14:25.654  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:297) [0;39m - pay() - Se va a pagar 35.15 del medio de pago 0010
12:14:25.654  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:390) [0;39m - assignIdTicket() - Se va a asignar el ID_TICKET ya que el ticket no tiene pagos.
12:14:25.654  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.TicketsService (TicketsService.java:136) [0;39m - setContadorIdTicket() - Obteniendo contador para identificador...
12:14:25.654  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.config.configContadores.ServicioConfigContadores (ServicioConfigContadores.java:98) [0;39m - consultar() - Consultando datos del contador: REP_NUMFAC
12:14:25.667  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.ServicioConfigContadoresRangos (ServicioConfigContadoresRangos.java:43) [0;39m - consultar() - Consultando rangos
12:14:25.675  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.contadores.ServicioContadores (ServicioContadores.java:370) [0;39m - consultarContador() - Obteniendo el valor para el contador REP_NUMFAC
12:14:25.675  [39mDEBUG [0;39m (main)  [34mc.comerzzia.pos.services.core.config.configContadores.parametros.ServicioConfigContadoresParametros (ServicioConfigContadoresParametros.java:103) [0;39m - consultar() - Consultando par√°metro del contador REP_NUMFAC
12:14:25.757  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:128) [0;39m - guardarBackupTicketActivo()
12:14:25.757  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:134) [0;39m - guardarBackupTicketActivo() - Eliminando copia de seguridad de ticket...
12:14:25.791  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:173) [0;39m - guardarBackupTicketActivo() - Guardando copia de seguridad de ticket...
12:14:25.804  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:182) [0;39m - guardarBackupTicketActivo() - Confirmando transacci√≥n...
12:14:25.804  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.FileCounterRangeManagerImpl (FileCounterRangeManagerImpl.java:103) [0;39m - readFromPropertiesFile() - Reading file fiscal/REP_NUMFAC__0000__FS__2025%2F2267.properties
12:14:25.805  [31mWARN  [0;39m (main)  [34mcom.comerzzia.pos.services.core.config.configContadores.rangos.FileCounterRangeManagerImpl (FileCounterRangeManagerImpl.java:122) [0;39m - readFromPropertiesFile() - No se ha encontrado el fichero REP_NUMFAC__0000__FS__2025/2267.properties: null
12:14:25.805  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:392) [0;39m - assignIdTicket() - Contador obtenido: 2796
12:14:25.806  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:110) [0;39m - pay() - Realizando operaci√≥n de venta
12:14:25.806  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:138) [0;39m - pay() - Trama de envio: 145;226;7;;2025226700002796;1;3515;;;;;;;
12:14:36.202  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TEFClearOne (TEFClearOne.java:77) [0;39m - enviarMensaje() - Mensaje recibido: 0;OPERACION ACEPTADA;2025226700002796;218429644;2025/09/26;VENTA;3515;EUR;A0000000031010;Visa Prepaid;45934002;************8351;VISA;;724;9999;0;DE;0;352982755;00000005;250926001;IBERCAJA;00;479361;059914;;4;2
12:14:36.202  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:140) [0;39m - pay() - Trama de respuesta: 0;OPERACION ACEPTADA;2025226700002796;218429644;2025/09/26;VENTA;3515;EUR;A0000000031010;Visa Prepaid;45934002;************8351;VISA;;724;9999;0;DE;0;352982755;00000005;250926001;IBERCAJA;00;479361;059914;;4;2
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:397) [0;39m - procesarRespuesta() - Nuevo formato de trama de respuesta recibido.
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:151) [0;39m - pay() - Confirmando transacci√≥n en la pasarela de ClearOne
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TEFClearOne (TEFClearOne.java:93) [0;39m - confirmarRespuesta() - Enviando mensaje de confirmacion ACK al TEF
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.dispositivo.tarjeta.clearone.TefClearOneManager (TefClearOneManager.java:153) [0;39m - pay() - Envio de ACK realizado
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.actions.sale.PayManager (PayManager.java:243) [0;39m - processPaymentOk() - Pay accepted
12:14:36.203  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.ticket.ScoTicketManager (ScoTicketManager.java:194) [0;39m - addPayToTicket() - Insert pay to ticket...
12:14:36.206  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="TenderAccepted"><fields><field ftype="int" name="Amount">3515</field><field ftype="string" name="TenderType">Credit</field><field ftype="string" name="Description">TARGETA CR√àDIT</field></fields></message>
12:14:36.213  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.ncr.NCRController (NCRController.java:145) [0;39m - Sending message: <message msgid="b2" name="Totals"><fields><field ftype="int" name="TotalAmount">3515</field><field ftype="int" name="TaxAmount.A">174</field><field ftype="int" name="BalanceDue">0</field><field ftype="int" name="ItemCount">15</field><field ftype="int" name="DiscountAmount">41</field><field ftype="int" name="Points">0</field></fields></message>
12:14:36.219  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:604) [0;39m - recordCashFlow() - Se va a guardar un movimiento de caja: [medio de pago: 0010, importe: 35.15, signo: +]
12:14:36.223  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:135) [0;39m - consultarProximaLineaDetalleCaja() - Obteniendo pr√≥ximo n√∫mero de l√≠nea de detalle de caja para uidDiarioCaja: 734c3487-b53a-4e7f-8889-b2e9cf991b4c
12:14:36.223  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:139) [0;39m - crearMovimiento() - obteniendo el numero de linea del movimiento
12:14:36.226  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.cajas.CajasService (CajasService.java:305) [0;39m - crearMovimiento() - Insertando movimiento de caja
12:14:36.252  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:343) [0;39m - saveTicketBackup() - Guardando copia de seguridad del ticket.
12:14:36.252  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:128) [0;39m - guardarBackupTicketActivo()
12:14:36.252  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:134) [0;39m - guardarBackupTicketActivo() - Eliminando copia de seguridad de ticket...
12:14:36.263  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:173) [0;39m - guardarBackupTicketActivo() - Guardando copia de seguridad de ticket...
12:14:36.280  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.ticket.copiaSeguridad.CopiaSeguridadTicketService (CopiaSeguridadTicketService.java:182) [0;39m - guardarBackupTicketActivo() - Confirmando transacci√≥n...
12:14:36.280  [39mDEBUG [0;39m (main)  [34mcom.comerzzia.pos.services.payments.PaymentsManagerImpl (PaymentsManagerImpl.java:325) [0;39m - pay() - Importe pendiente: 0.41
12:53:17.119  [34mINFO  [0;39m (main)  [34mcom.comerzzia.core.servicios.ContextHolder (ContextHolder.java:38) [0;39m - ********************** comerzzia Spring context info ****************************
12:53:17.139  [34mINFO  [0;39m (main)  [34mcom.comerzzia.core.servicios.ContextHolder (ContextHolder.java:39) [0;39m - ‚ÄÇ Id: org.springframework.context.support.ClassPathXmlApplicationContext@19627bc
12:53:17.139  [34mINFO  [0;39m (main)  [34mcom.comerzzia.core.servicios.ContextHolder (ContextHolder.java:40) [0;39m - ‚ÄÇ Application:
12:53:17.140  [34mINFO  [0;39m (main)  [34mcom.comerzzia.core.servicios.ContextHolder (ContextHolder.java:41) [0;39m - ‚ÄÇ Name: org.springframework.context.support.ClassPathXmlApplicationContext@19627bc
12:53:17.140  [34mINFO  [0;39m (main)  [34mcom.comerzzia.core.servicios.ContextHolder (ContextHolder.java:42) [0;39m - *********************************************************************************


ANALIZA PORQUE PASA ESTO

que en el segundo log me dicen que se queda pillado tras hacer el descuento de empleado, diciendo que falta por pagar lo que ha descontado, porque es asi dimelo sencillo y analiza ambos casos


porque puede ser se supone que es error del back que es lo que tienes subido, y ademas de las clases estandar no de las clases personalizadas de ametller, es decir del resto q no comienzan por ametller, podrias decirme tu que es lo que pasa y que error ves en el estandar que tienes subido al repositorio?